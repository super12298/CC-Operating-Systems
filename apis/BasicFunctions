--Basic Functions API
-----------------------------------
--All Functions
-----------------------------------
--Reboot with a countdown!
--Hint default is (1,18)
--usage BFS.sdc(x,y)

--Downloads Files from any source
--usage BFS.df("url", "path")

--Makes directory
--usage BFS.md("path")

--Detects Rednet and turns it on("true") or off("false")
--usage BFS.rd("true")

--This function draws a image
--usage BFS.dg("path", sleeptimeinseconds)

--This function prints the content of a page
--usage BFS.getlog("path")

--OS function that updates the system
--Usage BFS.verc("versionpath", "versionurl", "updatelocation", "updateurl")

--Disables or Enables the disk startup.
--usage BFS.DiskS("false") or BFS.DiskS("true")

--[Advance] Downloads Files from any source
--usage BFS.dfa("url", "backupurl", "path")

-----------------------------------
--This is a test function
function cdwn()
rn = 8
for i=1,rn do
print(rn)
rn = rn-1
end
end

--Reboot with a countdown!
--usage BFS.sdc(x,y)
function sdc(x,y)
timer = 5
	for i=1,timer do
		term.setCursorPos(x,y)
		print("Rebooting in "..timer.."...")
		sleep(1)
	timer = timer-1
end
os.reboot()
end


--Downloads Files from any source
--usage BFS.df("url", "path")
function df(url, path)
local check, msg = http.checkURL(url)
if not check then
write("Invalid URL: Error[" .. msg.."]")
else
if path == nul or path == "" or path == "/" then
write("Invalid Path")
else
	for i = 1, 3 do
	local response = http.get(url)
		if response then
		local data = response.readAll()
				if path then
				local f = io.open(path, "w")
				f:write(data)
				f:close()
				end
			return true
			end
		end
	return false
end
end
end

--[Advance] Downloads Files from any source
--usage BFS.dfa("url", "backupurl", "path")
function dfa(original, backup, path)
local ch3ck, msag = http.checkURL(original)
print(ch3ck)
if not fs.exists(path) then
if ch3ck then
df(original, path)
else
df(backup, path)
end
end
end

--Makes directory
--usage BFS.md(directory you want to make)
function md(dir)
	if not fs.exists(dir) then
	fs.makeDir(dir)
	else
	--print(dir.." already exist!")
	end
end 

--Detects Rednet and turns it on("true") or off("false")
--usage BFS.rd("true")
function rd()

end

--This function draws a image
--usage BFS.dg("path", sleeptimeinseconds)
function dg(path, speed)
BGL = paintutils.loadImage(path) 
paintutils.drawImage(BGL,1,1)
sleep(speed)
end

--This Function prints the content of a page
--usage BFS.getlog("path")
function getlog(path)
local log = http.get(path) --Get contents of page
local log2 = log.readAll()
print(log2)
end

--OS function that updates the system
--Usage BFS.verc("versionpath", "versionurl", "updatelocation", "updateurl")
function verc(path, url, updl, updp)
term.clear()
term.setCursorPos(1,1)
	if not fs.exists(path) then
	df(updp, updl)
	df(url, path)
	os.run({},updl)
	fs.delete(updl)
	print("Successfully updated!")	
	else
	local vnid = http.get(url)
	local rvnid = vnid.readAll()
		if fs.exists(path) then
		local readvn = fs.open(path, "r")
		local readvern = readvn.readAll()
		readvn.close()
		vn = readvern
			if vn == rvnid then
			fs.delete(updl)
			print("The software on this computer is up to date.")
			else
			df(updp, updl)
			df(url, path)
			os.run({},updl)
			fs.delete(updl)
			print("Successfully updated!")	
			end
		end
	end
end

--Disables or Enables the disk startup.
--usage BFS.DiskS("false") or BFS.DiskS("true")
function DiskS(quest)
settings.set("shell.allow_disk_startup", quest)
settings.save(".settings")
end

--Compairs the udid nothing special.
function Comp_udid(path, errorimg)
if fs.exists(path) then
	local fr = fs.open(path, "r")
	udid1 = fr.readAll()
		local gf = fs.open(path..".ref", "r")
		udid2 = gf.readAll()
	if udid1 == udid2 then
	else
	dg(errorimg, 0)
		term.setCursorPos(1,1)
	print("[Error]")
	sleep(10)
	os.reboot()
	end
	fr.close()
	gf.close()
	end
end

--Generates a unique id for the computer (You can use this to make a unique rednet id) and will check (if you put true) if it has been tampered it will prevent the computer from booting.
--  change 'compair' to true or false
--Usage udid("Codename", "path", "Compair". )
function udid(name, path)
	if not fs.exists(path) then
	local f = io.open(path, "w")
	f:write(name)
		for i = 1, 25 do
		local items = {"g", "d", "a", "n", "l", "2", "7", "9", "4", "5"}
		f:write(items[math.random(1, #items)])
		end
	f:close()
	fs.copy(path, path..".ref")
	end
end




